{% extends "base.html" %}

{% block content %}
  <div class="jumbotron">
    <h1>Buna, eu sunt Toto</h1>
    <p>Sunt o aplicatie distribuita de lista de cumparaturi</p>
  </div>

  <div class="row-fluid">
    <div class="span9">
      <div data-ng-app="Toto" data-ng-controller="TotoController as vm">
        <table class="table table-striped">
          <thead>
            <tr>
              <th colspan="2">
                <form action="{{servlet-context}}/" method="POST" onsubmit="javascript: return false" ng-submit="vm.addTodo()">
                  <div class="row">
                    <div class="col-lg-8">
                      <div class="input-group">
                        <input type="text" data-ng-model="vm.todoText" name="todo" class="form-control" placeholder="Ce cumparam?">  
                        <span class="input-group-btn">        
                          <button type="button" class="btn btn-success" data-ng-click="vm.addTodo()">Adauga</button>
                        </span>
                      </div><!-- /input-group --> 
                    </div> <!-- /col-lg-8 -->                    
                    <div class="col-lg-4">
                      <button type="button" class="btn btn-info" data-ng-click="vm.refreshList()">
                        <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
                      </button>
                    </div> <!-- /col-lg-4 -->
                  </div>
                </form>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr data-ng-repeat="todo in vm.todos">
              <td><p class="text-capitalize">{[{ todo.text }]}</p></td>
              <td><a class="btn btn-small btn-danger" href="#" data-ng-click="vm.deleteTodo(todo.id)">Sterge</a></td>
            </tr>
          </tbody>
        </table>
        <br />
      </div>
    </div>
  </div>
{% endblock %}

{% block page-scripts %}
    <script src="{{servlet-context}}/public/js/angular.min.js"></script>
    <script src="{{servlet-context}}/public/js/script.js"></script>
    <script type="text/javascript">
      var BASEURL = "{{base}}";
    </script>
{% endblock %}
